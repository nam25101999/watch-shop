{% extends "base.html" %}
{% load static %}  {# Nếu bạn dùng thẻ static trong template thì nhớ load nhé #}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto p-4">
  <h1 class="text-4xl font-bold mb-4">{{ product.name }}</h1>

  <div class="flex flex-col md:flex-row gap-6">
    <div class="md:w-1/2">
      {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="rounded-lg object-cover w-full h-96" />
      {% else %}
        <img src="{% static 'images/no-image.png' %}" alt="No image" class="rounded-lg object-cover w-full h-96" />
      {% endif %}
      <div class="flex mt-4 space-x-4 overflow-x-auto">
        {% for img in extra_images %}
          {% if img.image %}
            <img src="{{ img.image.url }}" alt="{{ product.name }}" class="w-20 h-20 object-cover rounded cursor-pointer hover:ring-2 hover:ring-yellow-400" />
          {% else %}
            <img src="{% static 'images/no-image.png' %}" alt="No image" class="w-20 h-20 object-cover rounded cursor-pointer hover:ring-2 hover:ring-yellow-400" />
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <div class="md:w-1/2">
      <p class="text-yellow-600 text-2xl font-bold mb-4">
        {% if product.discount_price %}
          <span class="line-through text-gray-400 mr-2">{{ product.price }}₫</span>
          {{ product.discount_price }}₫
        {% else %}
          {{ product.price }}₫
        {% endif %}
      </p>

      <p class="mb-4">{{ product.description|linebreaks }}</p>

      <h3 class="font-semibold mb-2">Thông số kỹ thuật:</h3>
      <p class="whitespace-pre-line mb-6">{{ product.specifications }}</p>

      <p><strong>Thương hiệu:</strong> {{ product.brand.name }}</p>
      <p><strong>Danh mục:</strong> {{ product.category.name }}</p>
      <p><strong>Giới tính:</strong> {{ product.get_gender_display }}</p>
      <p><strong>Tồn kho:</strong> {{ product.stock }}</p>

      <form method="post" action="{% url 'cart:add_to_cart' %}">
        {% csrf_token %}
        <input type="hidden" name="product_id" value="{{ product.id }}" />
        <label for="quantity">Số lượng:</label>
        <input type="number" id="quantity" name="quantity" value="1" min="1" class="w-16 border rounded px-1" />
        <button type="submit" class="mt-6 bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-2 px-6 rounded transition">
          Thêm vào giỏ hàng
        </button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
